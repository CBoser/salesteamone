================================================================================
HOLT HIERARCHY MAP
================================================================================
Session 1.2: Holt Plan Analysis (1 hour)
Date: Tuesday, November 11, 2025
Source: HOLT_REFERENCE_FILES_ANALYSIS.md, item_numbering_patterns.txt
Purpose: Document how Holt currently encodes the Plan → Elevation → 
         Option → Material hierarchy

================================================================================
1. HOW IS PLAN ENCODED?
================================================================================

ANSWER: Holt encodes plan CONSISTENTLY in numeric format

ENCODING LOCATION 1: Sheet Name
-------------------------------
Format: [PlanNumber][Elevations] [Community]

Examples:
  ✓ 1670ABCD CR         - Plan 1670, Elevations A/B/C/D, Creek Ridge
  ✓ 1649ABC GG          - Plan 1649, Elevations A/B/C, Golden Grove
  ✓ 1547 (153e)         - Plan 1547 (also known as 153e)
  ✓ 1656ABC CR          - Plan 1656, Elevations A/B/C, Creek Ridge
  ✓ 1890ABD HA          - Plan 1890, Elevations A/B/D, Harmony
  ✓ 1987AB WR           - Plan 1987, Elevations A/B, Waterford Ridge

CONSISTENT PATTERN:
  [4-digit Plan Number][Elevation Letters] [2-letter Community Code]
  
Plan Numbers (Holt uses):
  1547, 1649, 1656, 1670, 1890, 1987, 2164, 2353, 2403, 2615

âœ… FINDING: CONSISTENT NAMING STANDARD
Unlike Richmond's 3 patterns, Holt uses ONE consistent format.

ENCODING LOCATION 2: Option Code Structure
------------------------------------------
Holt's option codes INCLUDE the plan number:

Format: [PLAN][PHASE][OPTION][ELEV] - [ITEM]
        167   01     01     00        4085

Breaking down example: 167010100 - 4085
  167   = Plan number (Plan 1670)
  01    = Phase number (Phase 01)
  01    = Option number within phase (Option 01)
  00    = Elevation indicator (00 = A, 01 = B, 02 = C, 03 = D)
  ─────
  4085  = Item type (Lumber)

This means plan is encoded WITHIN every option code!

Actual elevation patterns seen:
  167010100 = Plan 1670, Phase 01, Option 01, Elevation A (100)
  167010200 = Plan 1670, Phase 01, Option 02, Elevation B (200)
  167010300 = Plan 1670, Phase 01, Option 03, Elevation C (300)
  167010400 = Plan 1670, Phase 01, Option 04, Elevation D (400)

ENCODING LOCATION 3: Plan Index Sheet
--------------------------------------
Sheet name: "Plan Index"

From Holt_Option_Elevation_Dictionary.xlsx:
  Column: Plan_No (plan identifier) ← AUTHORITATIVE

Plans with Option Mappings (10 base plans):
  1547 (153e)  - 1 elevation
  1649         - 3 elevations (A, B, C)
  1656         - 3 elevations (A, B, C)
  1670         - 4 elevations (A, B, C, D)
  1890         - 3 elevations (A, B, D)
  1987         - 2 elevations (A, B)
  2164         - Unknown elevation count
  2353         - Unknown elevation count
  2403         - Unknown elevation count
  2615         - Unknown elevation count

Total: 225 option mappings across 10 plans

ENCODING LOCATION 4: Reference Subdivisions Sheet
-------------------------------------------------
Maps communities to plans:

Communities (5 identified):
  CR  - Coyote Ridge (Creek Ridge)
  GG  - Golden Grove
  HA  - Harmony (Harmony Heights)
  HH  - Harmony Heights (same as HA?)
  WR  - Waterford Ridge

From Holt_Phase-Option_Dictionary.xlsx:
  944 bid sheet records across 5 communities
  Each community has separate pricing

Community â†' Plans relationship tracked in reference_Subdivisions

âœ… KEY FINDING: PLAN NUMBER IS AUTHORITATIVE
- 4-digit numeric format (1547, 1670, etc.)
- Embedded in option codes (167 = 1670)
- Consistent across all sheets and references
- NO alternate naming schemes

================================================================================
2. HOW IS ELEVATION ENCODED?
================================================================================

ANSWER: Holt uses SINGLE ENCODING (clean!)

ENCODING LOCATION 1: Sheet Name
-------------------------------
Format: [PlanNumber][Elevations] [Community]

Examples:
  1670ABCD CR  - Contains elevations A, B, C, D
  1649ABC GG   - Contains elevations A, B, C
  1987AB WR    - Contains elevations A, B

Pattern: Multi-letter suffix indicates ALL elevations in this sheet.

Unlike Richmond:
  - Richmond: Sometimes elevation in name, sometimes not
  - Holt: ALWAYS elevation letters in sheet name

ENCODING LOCATION 2: Option Code (Last 2-3 digits)
--------------------------------------------------
Elevation encoded in the option code itself:

Format: [PLAN][PHASE][OPTION][ELEVATION_CODE]

Elevation encoding pattern:
  ...00 or ...100 = Elevation A
  ...01 or ...200 = Elevation B
  ...02 or ...300 = Elevation C
  ...03 or ...400 = Elevation D

Examples:
  167010100 - 4085  = Plan 1670, Elevation A, Lumber
  167010200 - 4085  = Plan 1670, Elevation B, Lumber
  167010300 - 4085  = Plan 1670, Elevation C, Lumber
  167010400 - 4085  = Plan 1670, Elevation D, Lumber

Pattern note: The elevation codes increment by 100:
  Elevation A: XX100
  Elevation B: XX200
  Elevation C: XX300
  Elevation D: XX400

ENCODING LOCATION 3: Elevation Column (Confirmation)
---------------------------------------------------
From Holt_Option_Elevation_Dictionary.xlsx:

Column: Elevation (text description)
Values: "Elevation A", "Elevation B", "Elevation C", "Elevation D"

This column CONFIRMS the elevation encoded in the option code.

Example row:
  Option_Code: 167010100
  Elevation: "Elevation A"
  
This is CONFIRMATION, not the primary encoding.

âœ… CRITICAL DIFFERENCE FROM RICHMOND:

Richmond (TRIPLE ENCODING):
  |10.82BCD OPT DEN FOUNDATION - ELVB - ELVC - ELVD
  ^^^^^BCD                        ^^^^^^^^^^^^^^^^^^^^
  Pack ID + Location String + Option Codes = 3 places

Holt (SINGLE ENCODING):
  167010100
  ^^^^^^^00 ← Elevation encoded ONCE in option code
  Elevation column confirms: "Elevation A"
  
âœ… NO TRIPLE ENCODING PROBLEM IN HOLT!

Advantages of Holt's approach:
  - Update elevation in ONE place
  - No risk of inconsistency
  - Clear authoritative source
  - Easier to query and maintain

Learning-First Opportunity:
  "Why does Holt's system work better?
   
   Holt encodes elevation once in the option number (167010100 = 
   Elevation A). Richmond encoded it three times for Excel workarounds.
   
   Our new database uses Holt's approach: one authoritative location
   for elevation data, with SQL joins to retrieve it wherever needed.
   
   This prevents the sync errors that plagued Richmond's triple-encoding."

================================================================================
3. HOW IS COMMUNITY ENCODED?
================================================================================

ANSWER: Holt encodes community as a SEPARATE DIMENSION

ENCODING LOCATION 1: Sheet Name (Suffix)
----------------------------------------
Format: [PlanNumber][Elevations] [Community]

Examples:
  1670ABCD CR  - Creek Ridge
  1649ABC GG   - Golden Grove
  1890ABD HA   - Harmony
  1987AB WR    - Waterford Ridge

2-letter community codes:
  CR  - Coyote Ridge / Creek Ridge
  GG  - Golden Grove
  HA  - Harmony / Harmony Acres
  HH  - Harmony Heights
  WR  - Waterford Ridge

ENCODING LOCATION 2: Source Table (Pricing)
-------------------------------------------
From Holt_Phase-Option_Dictionary.xlsx:

Column: SourceTable
Values: 
  bidsheetCoyoteRidgeLumber
  bidsheetCoyoteRidgeSiding
  bidsheetGoldenGroveLumber
  bidsheetGoldenGroveSiding
  bidsheetHarmonyHeightLumber
  bidsheetHarmonyHeightSiding
  bidsheetHeartwoodAcresLumber
  bidsheetHeartwoodAcresSiding
  bidsheetWR1BLumber
  bidsheetWR1BSiding

Pattern: bidsheet[CommunityName][Category]

ENCODING LOCATION 3: Reference Subdivisions Sheet
-------------------------------------------------
Separate sheet maps communities to metadata:
  - Community code
  - Community full name
  - Plans available in each community
  - Pricing structure

âš ï¸  COMMUNITY AFFECTS PRICING!

From Holt_Phase-Option_Dictionary.xlsx:
  - 944 bid sheet records
  - Organized by community
  - Same plan, different community = different pricing
  - 279 records with actual cost data

Example: Plan 1670, Elevation A, Lumber
  - Coyote Ridge pricing: [from bidsheetCoyoteRidgeLumber]
  - Golden Grove pricing: [from bidsheetGoldenGroveLumber]
  - Different communities = different costs

âœ… KEY FINDING: COMMUNITY IS SEPARATE DIMENSION

Not encoded in plan number or option code.
Community affects:
  - Sheet organization (sheets grouped by community)
  - Pricing (each community has separate bid sheets)
  - Material selection (community-specific materials?)

Database design implication:
  - Community should be a separate table
  - Plan â†' Community relationship (which plans in which communities)
  - Community â†' Pricing (community-specific pricing)

================================================================================
4. HOW DO OPTIONS RELATE TO PLANS?
================================================================================

ANSWER: Holt uses HIERARCHICAL NUMERIC CODES (systematic!)

OPTION CODE STRUCTURE:
---------------------
Format: [PLAN][PHASE][OPTION][ELEV] - [ITEM]

Example: 167010105 - 4085

Breaking it down:
  167   = Plan number (Plan 1670)
  01    = Phase number (Phase 01 = base, Phase 02 = options, etc.)
  01    = Option number within phase (sequential)
  05    = Option variant or elevation-specific (05 = 3-car garage)
  00    = Elevation: 00=A, 01=B, 02=C, 03=D (if not in previous digit)
  ─────
  4085  = Item type (Lumber, Siding, etc.)

PHASE STRUCTURE:
---------------
Phase 01: Base elevation
  167010100 = Plan 1670, Base, Elevation A
  167010200 = Plan 1670, Base, Elevation B
  167010300 = Plan 1670, Base, Elevation C
  167010400 = Plan 1670, Base, Elevation D

Phase 01, Options:
  167010101 = Gable End Sheathing, Elevation A
  167010105 = 3 Car Garage Option, Elevation A
  167010201 = Gable End Sheathing, Elevation B
  167010205 = 3 Car Garage Option, Elevation B

Pattern: Last 2 digits encode both option and elevation.

COMMON OPTIONS (from Holt_Option_Elevation_Dictionary.xlsx):
-----------------------------------------------------------

Option 01 (XX0101): Gable End Sheathing
  - Available on most plans
  - Elevation-specific codes

Option 05 (XX0105): 3 Car Garage Option
  - Available on: 1649, 1656, 1670, 1890, 1987
  - Elevation-specific codes

Other options:
  - Fireplace options
  - Extended great room
  - Sunroom
  - Various elevation-specific structural options

ITEM TYPE CODES (CONSISTENT ACROSS ALL PLANS):
----------------------------------------------
4085 = Lumber (always)
4086 = Lumber - Barge Credit (discount/adjustment)
4120 = Trusses
4140 = Window Supply
4142 = Window Supply - Additional U-22 Triple Pane
4150 = Exterior Door Supply
4155 = Siding Supply
4320 = Interior Trim Supply - Millwork

âœ… KEY FINDING: ITEM TYPES ARE UNIVERSAL
Same item code means same material type across all plans and elevations.

OPTION CASCADE THROUGH ACTIVITIES:
----------------------------------
Example: 3 Car Garage Option (167010105)

This single option code triggers materials across multiple item types:
  167010105 - 4085  Lumber for 3-car garage
  167010105 - 4120  Trusses for 3-car garage
  167010105 - 4140  Windows for 3-car garage
  167010105 - 4155  Siding for 3-car garage

Same as Richmond's cascade pattern:
  Customer selects: "3 Car Garage"
  System adds materials in:
    Lumber (4085)
    Trusses (4120)
    Windows (4140)
    Siding (4155)

âš ï¸  OPTION CODES CHANGE BY PLAN?

YES:
  Plan 1670, Elevation A, 3-car garage: 167010105
  Plan 1649, Elevation A, 3-car garage: 164910105
  
Same option, different plan = different option code.

Pattern: Plan number embedded in every option code.

âš ï¸  OPTION CODES CHANGE BY ELEVATION?

YES:
  Plan 1670, Elevation A, 3-car garage: 167010105
  Plan 1670, Elevation B, 3-car garage: 167010205
  Plan 1670, Elevation C, 3-car garage: 167010305
  
Same option, different elevation = different option code.

Pattern: Elevation encoded in last 2-3 digits.

âœ… ONE OPTION, MULTIPLE USES?

Example: Gable End Sheathing
  - Available on multiple plans (1547, 1649, 1656, 1670, etc.)
  - Each plan has unique code (164910101, 167010101, etc.)
  - Universal concept, plan-specific implementation

This is more granular than Richmond:
  - Richmond: FPSING (fireplace) across multiple plans
  - Holt: 167010XXX (fireplace for plan 1670 only)

Trade-off:
  Richmond: Reusable codes, less granular tracking
  Holt: Plan-specific codes, precise tracking

================================================================================
5. CURRENT TABLE RELATIONSHIPS
================================================================================

HOW DO SHEETS LINK TOGETHER?

Holt uses similar SHEET-BASED architecture to Richmond:

PLAN INDEX SHEET:
  - Lists all plans
  - Plan_No column = authoritative plan identifier
  - Links to plan sheets via sheet name lookup

PLAN SHEETS (e.g., 1670ABCD CR, 1649ABC GG):
  - Each sheet = one plan with multiple elevations
  - OR one plan-community combination
  - Self-contained material list
  - Pack structure similar to Richmond (pipe-separated)

PACK ID SYSTEM:
--------------
Holt uses SAME hierarchical pipe system as Richmond!

Format: [Major].[Minor] [PACK NAME]

Examples from Holt BAT (inferred from similar structure):
  |10 FOUNDATION
  |10.01 OPT FOUNDATION
  |11 MAIN JOIST SYSTEM
  |20 MAIN WALLS

This is IDENTICAL to Richmond's pack hierarchy!

Pattern:
  - PIPE (|) separates hierarchy levels
  - MAJOR NUMBER (10, 11, 20, etc.) = construction phase
  - MINOR NUMBER (.01, .60, .82, etc.) = variant/option
  - PACK NAME = descriptive text

âœ… CRITICAL FINDING: SHARED PACK HIERARCHY!

Both Richmond and Holt use the same pack organization:
  - Pipe separators (|)
  - Phase numbers (10, 11, 20, etc.)
  - Decimal sub-phases (.01, .60, etc.)

This is a MAJOR advantage for unification!

REFERENCE SHEETS:
----------------
reference_Subdivisions:
  - Community definitions
  - Links communities to plans
  - Pricing structure

reference_CostCodes (inferred):
  - Maps item types (4085, 4120, etc.)
  - Activity categories
  - Consistent across plans

Holt_Option_Elevation_Dictionary.xlsx:
  - 225 option mappings
  - Plan â†' Option â†' Elevation relationships
  - Authoritative option reference

Holt_Phase-Option_Dictionary.xlsx:
  - 944 bid sheet records
  - Community-specific pricing
  - EffectiveDate tracking

WHAT'S THE PRIMARY KEY?

In Excel sense:
  - Sheet name = "primary key" for plans
  - Option code = "primary key" for option-elevation combos
  - Pack ID = "primary key" for materials within sheet

In Database sense (what it SHOULD be):
  - Plan: Plan_No (e.g., "1670")
  - Elevation: Elevation code (e.g., "A", "B", "C", "D")
  - Option: Option_Code (e.g., "167010105")
  - Pack: PackID (e.g., "10.01")
  - Material: LineItemID (needs to be created)

WHAT FORMULAS REFERENCE WHAT?

Similar to Richmond:
  - Most data is static
  - Quantity calculations in material rows
  - NO complex cross-sheet references observed
  - Each sheet is SELF-CONTAINED

This means:
  âœ… Easy to migrate (no complex dependencies)
  âš ï¸  Redundant data (same material in multiple sheets)
  âš ï¸  Update burden (change material = update all sheets)

================================================================================
6. CRITICAL ARCHITECTURAL ADVANTAGES (vs Richmond)
================================================================================

ADVANTAGE 1: Consistent Plan Naming
------------------------------------
Holt: ONE consistent format [PlanNumber][Elevations] [Community]
Richmond: THREE different formats (inconsistent)

Impact: Easier to parse, query, and maintain.

ADVANTAGE 2: Single Encoding of Elevation
------------------------------------------
Holt: Elevation in option code ONCE (167010100)
Richmond: Triple-encoded (pack ID + location + option code)

Impact: 
  - No sync issues
  - Clear authoritative source
  - Easier to maintain

ADVANTAGE 3: Systematic Option Codes
-------------------------------------
Holt: [PLAN][PHASE][OPTION][ELEV] numeric structure
Richmond: Mnemonic abbreviations (XGREAT, FPSING01, SUN)

Impact:
  - Holt: Precise tracking, but longer codes
  - Richmond: Memorable codes, but less granular

Trade-off: Precision vs. Memorability

ADVANTAGE 4: Universal Item Types
----------------------------------
Holt: 4085 = Lumber (always, everywhere)
Richmond: Vendor SKUs vary (288 different prefixes)

Impact: Consistent categorization across all plans.

ADVANTAGE 5: Community as Dimension
------------------------------------
Holt: Community tracked separately, affects pricing
Richmond: Community optional, inconsistent

Impact: Better pricing granularity and community management.

ADVANTAGE 6: Same Pack Hierarchy!
----------------------------------
Both systems use: |[Major].[Minor] [PACK NAME]

Impact: âœ… MAJOR UNIFICATION OPPORTUNITY!
  - Can use same pack structure in unified database
  - Minimal translation needed
  - Shared conceptual model

================================================================================
7. CURRENT SCALE
================================================================================

From Monday's Audit and Reference Files:

Holt System:
  - 10 base plans (1547, 1649, 1656, 1670, 1890, 1987, 2164, 2353, 2403, 2615)
  - ~50 plans total (projected with all community variants)
  - 225 option mappings (Holt_Option_Elevation_Dictionary.xlsx)
  - 944 bid sheet records (Holt_Phase-Option_Dictionary.xlsx)
  - 1,309 cost line items (Holt_Cost_Codes_20251103.xlsx)
  - 5 communities (CR, GG, HA, HH, WR)
  - 6 activity categories (Lumber, Trusses, Windows, Doors, Siding, Millwork)
  - 113 unique items (from pricing sheets)

Sheet Dimensions:
  - Similar to Richmond multi-elevation sheets
  - Estimated 500-600 rows per sheet
  - 40-50 columns per sheet

Pattern:
  - One sheet per plan-community combination
  - All elevations in one sheet
  - Materials grouped by pack (same as Richmond)

Combined Richmond + Holt:
  - Total plans: ~106 (56 Richmond + 50 Holt)
  - Total material line items: ~65,000
  - Total unique items: ~746 (633 Richmond + 113 Holt)

================================================================================
8. RECOMMENDATIONS FOR DATABASE DESIGN
================================================================================

Based on current Holt architecture:

RECOMMENDATION 1: Adopt Holt's Single Encoding
  Current Holt: Elevation in option code (167010100)
  Current Richmond: Triple-encoded (|10.82BCD ... - ELVB - ELVC - ELVD)
  Future: Store elevation ONCE in authoritative location

RECOMMENDATION 2: Preserve Pack Hierarchy
  Current: Both systems use |[Major].[Minor] structure
  Future: Use this SAME structure in unified database
          This is a gift - no translation needed!

RECOMMENDATION 3: Universal Item Type Codes
  Current Holt: 4085 = Lumber (consistent)
  Current Richmond: Vendor SKUs (variable)
  Future: Create universal item type taxonomy
          Map Richmond SKUs to item types

RECOMMENDATION 4: Community as Separate Dimension
  Current Holt: Community tracked, affects pricing
  Current Richmond: Community optional
  Future: Community table with pricing relationships

RECOMMENDATION 5: Option Code Translation Layer
  Current Holt: Numeric (167010105)
  Current Richmond: Mnemonic (3CARA)
  Future: Translation table:
          holt_code â†" richmond_code â†" universal_option_name
          167010105 â†" 3CARA       â†" THREE_CAR_GARAGE

RECOMMENDATION 6: Systematic vs Mnemonic Codes
  Trade-off: Holt's systematic (precise) vs Richmond's mnemonic (memorable)
  Future: Support BOTH:
          - Internal: Systematic numeric codes
          - Display: Mnemonic abbreviations
          - Translation layer connects them

================================================================================
9. KEY SIMILARITIES TO RICHMOND (Unification Opportunities)
================================================================================

SIMILARITY 1: Pack Hierarchy Structure
  Both use: |[Major].[Minor] [PACK NAME]
  Impact: âœ… Can use identical pack structure in database!

SIMILARITY 2: Phase-Based Organization
  Both organize by construction phase: 10, 11, 20, etc.
  Impact: âœ… Natural alignment for pack consolidation!

SIMILARITY 3: Option Cascade Pattern
  Both cascade options through multiple phases/item types
  Impact: âœ… Same conceptual model for option management!

SIMILARITY 4: Self-Contained Sheets
  Both use sheet-based architecture with minimal cross-references
  Impact: âœ… Easy to migrate, but need to normalize!

SIMILARITY 5: Elevation as Variant
  Both treat elevation as a variant of a base plan
  Impact: âœ… Can use same plan-elevation relationship!

SIMILARITY 6: Material Grouping
  Both group materials by pack within sheets
  Impact: âœ… Natural structure for material lists!

================================================================================
10. KEY DIFFERENCES FROM RICHMOND (Design Decisions Needed)
================================================================================

DIFFERENCE 1: Elevation Encoding
  Holt: Single encoding (clean)
  Richmond: Triple encoding (problematic)
  Decision: Use Holt's approach

DIFFERENCE 2: Option Code Format
  Holt: Systematic numeric (167010105)
  Richmond: Mnemonic abbreviations (3CARA)
  Decision: Support both, provide translation

DIFFERENCE 3: Community Handling
  Holt: Community as dimension with pricing
  Richmond: Community optional/informal
  Decision: Adopt Holt's community structure

DIFFERENCE 4: Item Numbering
  Holt: Universal item types (4085 = Lumber)
  Richmond: Vendor SKU passthrough (variable)
  Decision: Create universal taxonomy, map Richmond SKUs

DIFFERENCE 5: Plan-Specific Option Codes
  Holt: Every plan has unique codes (167010105, 164910105)
  Richmond: Some options universal (XGREAT across plans)
  Decision: See Tuesday Decision #1 (Universal vs Plan-Specific)

================================================================================
OUTPUT: holt_hierarchy_map.txt
================================================================================
Created: Tuesday, November 11, 2025
Compare to: richmond_hierarchy_map.txt
Next: Architecture Design Session 2 (3 critical decisions)
Purpose: Feed into Tuesday Architecture Design decisions

================================================================================
CRITICAL INSIGHTS FOR TUESDAY DECISIONS
================================================================================

DECISION 1: Plan-Pack Relationships
  Evidence: Both systems use shared pack structure (|Major.Minor)
  Question: Are packs universal or plan-specific?
  Holt evidence: Plan number in option codes suggests plan-specific
  Richmond evidence: XGREAT used across plans suggests universal

DECISION 2: Plan-Elevation Modeling  
  Evidence: Holt uses single encoding, Richmond uses triple encoding
  Clear winner: Holt's approach (single authoritative location)
  Implementation: Use Holt's pattern for unified database

DECISION 3: Internal Option Code Philosophy
  Evidence: Holt = systematic numeric, Richmond = mnemonic
  Trade-off: Precision vs memorability
  Solution: Support BOTH via translation layer
  
These three decisions determine the entire database schema!
